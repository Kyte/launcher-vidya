<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <script src="scripts/phaser.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update, render: render });
        
        var ground, player, fairies, keys;

        function preload (){
            game.load.spritesheet('rabbit', 'assets/rabbit.png', 185, 160);
            game.load.spritesheet('butterflies', 'assets/butterflies.png', 32, 32)
            game.load.image('sky', 'assets/sky.png');
            game.load.image('platform', 'assets/platform.png');
        }

        function create (){
            game.physics.startSystem(Phaser.Physics.ARCADE);
            game.add.sprite(0, 0, 'sky');
            
            ground = game.add.sprite(0, game.world.height - 32, 'platform');
            ground.scale.setTo(2, 1);
            game.physics.arcade.enable(ground);
            ground.body.immovable = true;
        
            player = game.add.sprite(game.world.centerX, game.world.height - 120, 'rabbit');
            player.scale.setTo(0.5, 0.5);
            game.physics.arcade.enable(player);
            player.body.gravity.y = 10;
            player.body.collideWorldBounds = true;
            
            player.animations.add('walk', [1, 2, 3], 12, true);
            player.animations.add('jump', [4, 5, 6, 7], 16, true);
            
            fairies = game.add.group();
            fairies.enableBody = true;
            
            keys = game.input.keyboard.createCursorKeys();
        }

        function update() {
            game.physics.arcade.collide(player, ground);
            
            if (keys.left.isDown) {
                player.body.velocity.x = -100;
                player.scale.x = -0.5;
                
                player.animations.play("walk");
            } else if (keys.right.isDown) {
                player.body.velocity.x = 100;
                player.scale.x = 0.5;
                
                player.animations.play("walk");
            } else {
                player.body.velocity.x = 0;
                
                player.animations.stop();
                player.frame = 0;
            }
        }
        
        function render () {
           game.debug.body(player);
        }
    };

    </script>

    </body>
</html>